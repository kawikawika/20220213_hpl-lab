# 20220213_hpl-lab
High-Performance Linpack benchmark solves uniformly random system of linear equations to determine the system’s floating-point computational power. The results of HPL is the optimistic performance of the system, which is usually not match in real-world applications.

The linear equations are generated by HPL parameters N, NB, P, and Q.
- N is the problem size
- NB is the the block size
- P is the number of rows
- Q is the number of columns
  
<img width="468" alt="image" src="https://user-images.githubusercontent.com/11095946/153784916-f6468e90-9f78-4e48-8387-11cf9883e9f0.png">

The purpose of this lab is to create a script that will generate different HPL parameters. You may use any programming language and IDE to generate this script, as long as:
- You are able to make changes to the file structure
  - i.e. read and write to files and make directories
- You are able to run linux commands from the script
```python
  # python system call to create directory called runs in the test directory
  os.system('mkdir test/runs')
```

## Step 1: Determine N

N is the matrix size (# of equations):
- Floating point work varies as N<sup>3</sup>, communication volume varies as N<sup>2</sup>, so the computation:communication ratio improves as N increases
- 2X increase in problem size → up to 8X increase in run time
- Memory usage in GiB is approximately 8*N<sup>2</sup>/10243
- Each node has 256 GiB of memory but Slurm is configured to allow jobs to use ~80% of that
- If you want to size a 2-node (nnodes = 2) job to use approximately 70% (mem_perc = .70) of memory, then N = sqrt(mem_perc * nnodes * 256 * 10243/8) = 219325
  - Does it help for N to be a multiple of NB?
- Make sure N isn’t too small, since results of parameterization experiments for small N may not be the same as those for large N

```python
  '''
  funciton _ns() takes no arguments
  Generate an array of Ns that satisify the requirements above
  '''
  def _ns():
    ns_array = []
    '''
    # code that will determine which numbers to add to ns array
    '''
    return ns_array
```

